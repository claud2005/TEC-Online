<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/clientes"></ion-back-button>
    </ion-buttons>
    <ion-title>Orçamentos do Cliente</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content *ngIf="cliente; else carregando">
  <ion-card>
    <ion-card-header>
      <ion-card-title>{{ cliente.nomeCompleto || cliente.nome }}</ion-card-title>
      <ion-card-subtitle>{{ cliente.email || cliente.telefone }}</ion-card-subtitle>
    </ion-card-header>
  </ion-card>

  <ion-list>
    <ion-list-header>
      <ion-label>Serviços disponíveis</ion-label>
    </ion-list-header>

    <ion-item *ngFor="let servico of servicos; trackBy: trackById">
      <ion-checkbox slot="start" [(ngModel)]="servico.selecionado"></ion-checkbox>
      <ion-label>
        <h3>{{ servico.marcaAparelho }} - {{ servico.modeloAparelho }}</h3>
        <p>{{ servico.problemaRelatado }}</p>
        <p><strong>Valor Total:</strong> {{ formatCurrency(servico.valorTotal) }}</p>
      </ion-label>
    </ion-item>
  </ion-list>

  <ion-button expand="block" color="secondary" (click)="gerarPDFSelecionados()">
    Gerar PDF dos Serviços Selecionados
  </ion-button>
</ion-content>

<ng-template #carregando>
  <ion-spinner name="crescent"></ion-spinner>
  <p class="ion-text-center">Carregando informações...</p>
</ng-template>
