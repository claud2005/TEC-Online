"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8546],{8546:(x,c,a)=>{a.r(c),a.d(c,{EditarPerfilPageModule:()=>U});var m=a(177),s=a(4341),n=a(4742),u=a(9522),h=a(467),g=a(3114),o=a(4438),b=a(3656),E=a(1626);function C(e,l){1&e&&(o.j41(0,"ion-note",10),o.EFF(1," O nome completo \xe9 obrigat\xf3rio. "),o.k0s())}function M(e,l){1&e&&(o.j41(0,"ion-note",10),o.EFF(1," O nome de utilizador \xe9 obrigat\xf3rio. "),o.k0s())}let P=(()=>{var e;class l{constructor(t,i,r){this.platform=t,this.router=i,this.http=r,this.fotoPerfil="assets/icon/user.png",this.perfil={nomeCompleto:"",nomeUtilizador:""},this.userId="user-id",this.isWeb=!this.platform.is("hybrid")}ngOnInit(){this.carregarDadosPerfil()}carregarDadosPerfil(){this.http.get("http://localhost:3000/api/users/profile").subscribe(t=>{this.perfil.nomeCompleto=t.nomeCompleto,this.perfil.nomeUtilizador=t.nomeUtilizador,this.fotoPerfil=t.profilePicture||this.fotoPerfil},t=>{console.error("Erro ao carregar dados do perfil:",t)})}alterarFoto(){var t=this;return(0,h.A)(function*(){var i;if(t.isWeb)null===(i=document.getElementById("fileInput"))||void 0===i||i.click();else try{const r=yield g.i7.getPhoto({quality:90,allowEditing:!1,resultType:g.LK.DataUrl,source:g.ru.Prompt});r.dataUrl&&(t.fotoPerfil=r.dataUrl)}catch(r){console.error("Erro ao capturar imagem:",r)}})()}onFileSelected(t){const i=t.target.files[0];if(i){const r=new FileReader;r.onload=p=>{this.fotoPerfil=p.target.result},r.readAsDataURL(i)}}salvarPerfil(){this.http.put("http://localhost:3000/api/users/profile",{nomeCompleto:this.perfil.nomeCompleto,nomeUtilizador:this.perfil.nomeUtilizador,profilePicture:this.fotoPerfil}).subscribe(i=>{console.log("Perfil atualizado com sucesso!",i),alert("Perfil atualizado com sucesso!"),this.router.navigate(["/perfil"])},i=>{console.error("Erro ao atualizar perfil:",i)})}voltarParaPerfil(){this.router.navigate(["/perfil"])}}return(e=l).\u0275fac=function(t){return new(t||e)(o.rXU(b.OD),o.rXU(u.Ix),o.rXU(E.Qq))},e.\u0275cmp=o.VBU({type:e,selectors:[["app-editar-perfil"]],decls:22,vars:4,consts:[["form","ngForm"],["slot","start"],["defaultHref","/perfil"],[3,"ngSubmit"],["position","floating"],["name","nomeCompleto","aria-label","Nome Completo","required","","minlength","3",3,"ngModelChange","ngModel"],["color","danger",4,"ngIf"],["name","nomeUtilizador","aria-label","Nome de Utilizador","required","","minlength","3",3,"ngModelChange","ngModel"],["expand","full","type","submit"],["name","save-outline","slot","start"],["color","danger"]],template:function(t,i){if(1&t){const r=o.RV6();o.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",1),o.nrm(3,"ion-back-button",2),o.k0s(),o.j41(4,"ion-title"),o.EFF(5,"Editar Perfil"),o.k0s()()(),o.j41(6,"ion-content")(7,"form",3,0),o.bIt("ngSubmit",function(){return o.eBV(r),o.Njj(i.salvarPerfil())}),o.j41(9,"ion-item")(10,"ion-label",4),o.EFF(11,"Nome Completo:"),o.k0s(),o.j41(12,"ion-input",5),o.mxI("ngModelChange",function(f){return o.eBV(r),o.DH7(i.perfil.nomeCompleto,f)||(i.perfil.nomeCompleto=f),o.Njj(f)}),o.k0s()(),o.DNE(13,C,2,0,"ion-note",6),o.j41(14,"ion-item")(15,"ion-label",4),o.EFF(16,"Nome de Utilizador:"),o.k0s(),o.j41(17,"ion-input",7),o.mxI("ngModelChange",function(f){return o.eBV(r),o.DH7(i.perfil.nomeUtilizador,f)||(i.perfil.nomeUtilizador=f),o.Njj(f)}),o.k0s()(),o.DNE(18,M,2,0,"ion-note",6),o.j41(19,"ion-button",8),o.nrm(20,"ion-icon",9),o.EFF(21," Salvar "),o.k0s()()()}if(2&t){const r=o.sdS(8);o.R7$(12),o.R50("ngModel",i.perfil.nomeCompleto),o.R7$(),o.Y8G("ngIf",!i.perfil.nomeCompleto&&r.submitted),o.R7$(4),o.R50("ngModel",i.perfil.nomeUtilizador),o.R7$(),o.Y8G("ngIf",!i.perfil.nomeUtilizador&&r.submitted)}},dependencies:[n.bv,n.Jm,n.QW,n.W9,n.eU,n.iq,n.$w,n.uz,n.he,n.JI,n.BC,n.ai,n.Gw,n.el,m.MD,m.bT,s.YN,s.qT,s.BC,s.cb,s.YS,s.xh,s.vS,s.cV],styles:['@charset "UTF-8";ion-content[_ngcontent-%COMP%]{--background: #810773;position:relative;height:100vh;width:100%;margin:0;padding:0}form[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:90%;max-width:400px;padding:24px;background:#ffffff1a;border-radius:16px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);box-shadow:0 4px 16px #0003;display:flex;flex-direction:column;align-items:center}ion-item[_ngcontent-%COMP%]{--background: transparent;--border-radius: 8px;width:100%;margin-bottom:16px}ion-label[_ngcontent-%COMP%]{font-weight:700;color:#fff}ion-input[_ngcontent-%COMP%]{--padding-start: 10px;font-size:16px;color:#fff}ion-button[_ngcontent-%COMP%]{--background: #ffcc00;--border-radius: 8px;margin-top:20px;font-size:18px;font-weight:700;text-transform:uppercase;width:100%}ion-note[_ngcontent-%COMP%]{display:block;margin-top:-10px;margin-bottom:16px;font-size:14px;color:#ff6b6b}']}),l})();const v=[{path:"",component:P}];let F=(()=>{var e;class l{}return(e=l).\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.$C({type:e}),e.\u0275inj=o.G2t({imports:[u.iI.forChild(v),u.iI]}),l})(),U=(()=>{var e;class l{}return(e=l).\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.$C({type:e}),e.\u0275inj=o.G2t({imports:[m.MD,s.YN,n.bv,F,P]}),l})()}}]);