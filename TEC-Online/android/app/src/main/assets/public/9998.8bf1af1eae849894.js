"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9998],{9998:(v,c,r)=>{r.r(c),r.d(c,{EditarClientePage:()=>g});var u=r(467),i=r(4341),t=r(4742),E=r(177),o=r(4438),_=r(4384),h=r(3656),C=r(6960);let g=(()=>{var l;class d{constructor(e,n,a,s,p){this.formBuilder=e,this.clienteService=n,this.alertController=a,this.navCtrl=s,this.activatedRoute=p,this.clienteForm=this.formBuilder.group({nome:["",i.k0.required],codigoPostal:["",i.k0.required],morada:["",i.k0.required],email:["",[i.k0.required,i.k0.email]],contacto:["",[i.k0.required,i.k0.pattern("^[0-9]{9}$")]],contribuinte:["",[i.k0.required,i.k0.pattern("^[0-9]{9}$")]],codigoCliente:["",i.k0.required]})}ngOnInit(){this.clienteId=this.activatedRoute.snapshot.paramMap.get("id"),this.clienteId?this.carregarCliente():(this.showAlert("Erro","ID do cliente n\xe3o encontrado na URL."),this.navCtrl.back())}carregarCliente(){this.clienteService.obterClientePorId(this.clienteId).subscribe({next:e=>{this.clienteForm.patchValue({nome:e.nome||"",codigoPostal:e.codigoPostal||"",morada:e.morada||"",email:e.email||"",contacto:e.contacto||"",contribuinte:e.contribuinte||"",codigoCliente:e.codigoCliente||""})},error:e=>{console.error("Erro ao carregar cliente:",e),this.showAlert("Erro","N\xe3o foi poss\xedvel carregar os dados do cliente."),this.navCtrl.back()}})}editarCliente(){if(this.clienteForm.invalid)return void this.showAlert("Erro","Por favor, preencha todos os campos corretamente.");const e={...this.clienteForm.value,id:this.clienteId};console.log("Dados enviados para o backend:",e),this.clienteService.atualizarCliente(this.clienteId,e).subscribe({next:()=>{this.showAlert("Sucesso","Cliente atualizado com sucesso!"),this.navCtrl.navigateBack("/gestor-clientes")},error:n=>{var a;console.error("Erro ao atualizar cliente:",n);const s=(null==n||null===(a=n.error)||void 0===a?void 0:a.message)||(null==n?void 0:n.message)||"Erro inesperado ao atualizar cliente.";this.showAlert("Erro",s)}})}voltar(){this.navCtrl.back()}showAlert(e,n){var a=this;return(0,u.A)(function*(){yield(yield a.alertController.create({header:e,message:n,buttons:["OK"]})).present()})()}}return(l=d).\u0275fac=function(e){return new(e||l)(o.rXU(i.ok),o.rXU(_.M),o.rXU(t.hG),o.rXU(h.q9),o.rXU(C.nX))},l.\u0275cmp=o.VBU({type:l,selectors:[["app-editar-cliente"]],decls:69,vars:1,consts:[[1,"ion-padding","conteudo-branco"],[1,"form-card"],[2,"margin-bottom","12px"],[2,"font-size","1.75rem","font-weight","700","color","#1a3d7c"],[1,"info-card"],["name","information-circle-outline","slot","start"],[3,"ngSubmit","formGroup"],["name","person-outline","slot","start"],["size","6"],["position","floating"],["formControlName","nome","required",""],["formControlName","codigoPostal","required",""],["formControlName","morada","type","text","required",""],["formControlName","email","type","email","required",""],["formControlName","contacto","type","tel","maxlength","9","required",""],["formControlName","contribuinte","type","tel","maxlength","9","required",""],["formControlName","codigoCliente","required",""],[1,"ion-margin-top"],["expand","block","color","medium",3,"click"],["name","arrow-back-outline","slot","start"],["expand","block","type","submit","color","success"],["name","save-outline","slot","start"]],template:function(e,n){1&e&&(o.j41(0,"ion-content",0)(1,"ion-card",1)(2,"div",2)(3,"h1",3),o.EFF(4,"Editar Cliente"),o.k0s()(),o.j41(5,"ion-card",4)(6,"ion-card-header")(7,"ion-card-title"),o.nrm(8,"ion-icon",5),o.EFF(9," Informa\xe7\xf5es B\xe1sicas "),o.k0s()(),o.j41(10,"ion-card-content"),o.EFF(11," Altere os dados abaixo para atualizar as informa\xe7\xf5es do cliente. Os campos marcados como obrigat\xf3rios devem ser preenchidos para continuar. "),o.k0s()(),o.j41(12,"form",6),o.bIt("ngSubmit",function(){return n.editarCliente()}),o.j41(13,"ion-card",1)(14,"ion-card-header")(15,"ion-card-title"),o.nrm(16,"ion-icon",7),o.EFF(17," Identifica\xe7\xe3o "),o.k0s()(),o.j41(18,"ion-card-content")(19,"ion-grid")(20,"ion-row")(21,"ion-col",8)(22,"ion-item")(23,"ion-label",9),o.EFF(24,"Nome"),o.k0s(),o.nrm(25,"ion-input",10),o.k0s()(),o.j41(26,"ion-col",8)(27,"ion-item")(28,"ion-label",9),o.EFF(29,"C\xf3digo Postal"),o.k0s(),o.nrm(30,"ion-input",11),o.k0s()()(),o.j41(31,"ion-row")(32,"ion-col",8)(33,"ion-item")(34,"ion-label",9),o.EFF(35,"Morada"),o.k0s(),o.nrm(36,"ion-input",12),o.k0s()(),o.j41(37,"ion-col",8)(38,"ion-item")(39,"ion-label",9),o.EFF(40,"Email"),o.k0s(),o.nrm(41,"ion-input",13),o.k0s()()(),o.j41(42,"ion-row")(43,"ion-col",8)(44,"ion-item")(45,"ion-label",9),o.EFF(46,"Contacto"),o.k0s(),o.nrm(47,"ion-input",14),o.k0s()(),o.j41(48,"ion-col",8)(49,"ion-item")(50,"ion-label",9),o.EFF(51,"Contribuinte"),o.k0s(),o.nrm(52,"ion-input",15),o.k0s()()(),o.j41(53,"ion-row")(54,"ion-col",8)(55,"ion-item")(56,"ion-label",9),o.EFF(57,"C\xf3digo do Cliente"),o.k0s(),o.nrm(58,"ion-input",16),o.k0s()()()()()(),o.j41(59,"ion-grid",17)(60,"ion-row")(61,"ion-col")(62,"ion-button",18),o.bIt("click",function(){return n.voltar()}),o.nrm(63,"ion-icon",19),o.EFF(64," Voltar "),o.k0s()(),o.j41(65,"ion-col")(66,"ion-button",20),o.nrm(67,"ion-icon",21),o.EFF(68," Atualizar "),o.k0s()()()()()()()),2&e&&(o.R7$(12),o.Y8G("formGroup",n.clienteForm))},dependencies:[E.MD,i.YN,i.qT,i.BC,i.cb,i.YS,i.tU,i.X1,i.j4,i.JD,t.bv,t.Jm,t.b_,t.I9,t.ME,t.tN,t.hU,t.W9,t.lO,t.iq,t.$w,t.uz,t.he,t.ln,t.Gw],encapsulation:2}),d})()}}]);